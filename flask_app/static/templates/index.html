<!DOCTYPE html>
<html>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link type='text/css' href='{{ url_for('static', filename='templates/style.css') }}' rel='stylesheet'>

<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="{{url_for('static', filename='templates/dashboard.js')}}"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>

<head lang="en">
    <meta charset="UTF-8" content= "width=device-width, initial-scale=1.0">
    <title>My First Dashboard</title>
</head>
<body class="bg-light">
  <div class="container-xxl">
      <!-- Navigation Bar -->
      <nav class="navbar bg-secondary" id="navigationbar">
          <div class="container-fluid">
              <a class="navbar-brand" href="#">
                  <img src="{{ url_for('static', filename='rml.png') }}" alt="Logo" width="50" height="50" class="d-inline-block align-middle">
                  <span id="heading" class="fs-1 align-middle headingDark">Day Trading Dashboard</span>
              </a>                
            <form class="position-relative" role="switch">                  
              <input type="radio" class="btn-check" name="switch" id="switch" autocomplete="off">
              <label id="switchText" class="btn btn-dark" for="switch">Dark</label>
            </form>
          </div>
      </nav>

      <!-- Container for the dashboard -->
      <div class="container-fluid">
          <div class="row align-items-md-stretch">
            <div class="col col-lg-2 p-3">
              <div class="row py-3 gy-5 dropdown-item">   
                    <button class="btn btn-secondary dropdown-toggle" id="country" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Select Countries
                    </button>
                    <ul id="countryList" class="dropdown-menu scrollDropdown">
                      <div class="input-group">
                          <span class="input-group-text" id="basic-addon1">
                            <i class="bi bi-search"></i>
                          </span>
                        <input type="text" class="form-control" placeholder="" aria-label="Indices" aria-describedby="basic-addon1" id="filterCountry" onkeyup="filter('filterCountry', 'countryList')">
                      </div>
                      {% for country in countryList %}
                        <li>
                          <a class="dropdown-item" onclick="updateCountry(this.innerHTML)" style="display: display-listitem;">{{country}}</a>
                        </li>
                      {% endfor %}
                    </ul>
                </div> 
                <div class="row py-3 gy-5 dropdown-item">
                    <button class="btn btn-secondary dropdown-toggle" id="index" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Choose Indices
                    </button>
                    <ul id="indexList" class="dropdown-menu scrollDropdown">
                      <div class="input-group">
                          <span class="input-group-text" id="basic-addon1">
                            <i class="bi bi-search"></i>
                          </span>
                        <input type="text" class="form-control" placeholder="" aria-label="Indices" aria-describedby="basic-addon1" id="filterIndex" onkeyup="filter('filterIndex', 'indexList')">
                      </div>
                      {% for idx in indices %}
                        <li>
                          <a class="dropdown-item" onclick="updateIndices(this.innerHTML)" style="display: display-listitem;">{{idx}}</a>
                        </li>
                      {% endfor %}
                    </ul>
                </div>     

              <div class="row py-3 gy-5">
                <ul class="list-group scrollList" id="stockList">
                  <!-- Add the list of stcoks when populated -->
                </ul>
              </div>
            </div>
            <div class="col-8 p-3">
              <div class="chart" id="myDiv" style="width: 95%;">
                <script>
                    var graphs = {{plot|safe}};                    
                    var layout = {
                    title:'Stock Price over Time'
                    };
                    Plotly.newPlot('myDiv',graphs,layout);
                </script>
            </div>
            </div>             
            <div class="col col-lg-2 p-3">
              <div class="row py-3 gy-5">
                  <div class="card text-bg-danger">
                      <div class="card-body">
                          <h5 class="card-title">Predicted Price</h5>
                          <h2 class="card-text">-100â‚¬
                              <span class="material-symbols-outlined">
                                  trending_down
                              </span>
                          </h2>
                      </div>
                  </div>
              </div>
              <div class="row py-3 gy-5">
                  <div class="card text-bg-success">
                    <div class="card-body">
                      <h5 class="card-title">Delta to Buying Price</h5>                        
                      <h2 class="card-text danger">10%
                          <span class="material-symbols-outlined">
                              trending_up
                          </span>
                      </h2>
                    </div>
                  </div>
              </div>
              <div class="row py-3 gy-5">
                <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="ramashwinkX" data-description="Support me on Buy me a coffee!" data-message="Thank you for caffeinating more ideas" data-color="#FF5F5F" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
            </div>
            </div>
          </div>
      </div>
  </div>
</body>
</html>